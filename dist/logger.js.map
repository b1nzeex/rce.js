{"version":3,"file":"logger.js","sourceRoot":"","sources":["../src/logger.ts"],"names":[],"mappings":"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","sourcesContent":["import { LogLevel } from \"./types\";\nimport type { ILogger, ILogType } from \"./types\";\nimport { inspect } from \"util\";\nimport { stat, appendFile, writeFile } from \"fs\";\n\nenum ConsoleColor {\n  Reset = \"\\x1b[0m\",\n  FgRed = \"\\x1b[31m\",\n  FgGreen = \"\\x1b[32m\",\n  FgYellow = \"\\x1b[33m\",\n  FgCyan = \"\\x1b[36m\",\n}\n\nexport default class Logger implements ILogger {\n  private logLevel: LogLevel = LogLevel.Info;\n  private file?: string;\n\n  constructor(logLevel: LogLevel = LogLevel.Info, file?: string) {\n    this.logLevel = logLevel;\n    this.file = file;\n  }\n\n  private format(content: any): string {\n    return typeof content === \"string\"\n      ? content\n      : inspect(content, { depth: 5 });\n  }\n\n  private logToFile(type: string, message: string) {\n    if (this.file) {\n      stat(this.file, (err, stats) => {\n        if (err) {\n          writeFile(this.file, \"\", (err) => {\n            if (err) {\n              this.warn(`Failed To Create Log File: ${err.message}`);\n            }\n          });\n        }\n\n        if (stats.size > 300 * 1024 * 1024) {\n          writeFile(this.file, \"\", (err) => {\n            if (err) {\n              this.warn(`Failed To Clear Log File: ${err.message}`);\n            }\n          });\n        }\n\n        const log =\n          typeof message === \"string\"\n            ? `[${type.toUpperCase()}]: ${message}\\n`\n            : `[${type.toUpperCase()}]: ${inspect(message, { depth: 5 })}\\n`;\n\n        appendFile(this.file, log, (err) => {\n          if (err) {\n            this.warn(`Failed To Write To Log File: ${err.message}`);\n          }\n        });\n      });\n    }\n  }\n\n  private log(level: LogLevel, logType: ILogType, message: string) {\n    this.logToFile(logType.prefix, message);\n\n    if (this.logLevel !== LogLevel.None && level <= this.logLevel) {\n      const date = new Date();\n      const timestamp = date.toLocaleTimeString([], { hour12: false });\n      const padding = \" \".repeat(Math.max(0, 15 - logType.prefix.length));\n      const formattedMessage = `\\x1b[90m[${timestamp}]\\x1b[0m ${logType.color}${logType.prefix}${padding}${logType.emoji}${ConsoleColor.Reset}`;\n\n      console.log(formattedMessage, this.format(message));\n    }\n  }\n\n  /**\n   *\n   * @param message - The message to log\n   * @description Logs a message with the [DEBUG] prefix\n   *\n   * @example\n   * ```js\n   * manager.logger.debug(\"Hello, World!\");\n   * ```\n   */\n  debug(message: string) {\n    const logType: ILogType = {\n      prefix: \"[DEBUG]\",\n      emoji: \"🔧\",\n      color: ConsoleColor.FgGreen,\n    };\n\n    this.log(LogLevel.Debug, logType, message);\n  }\n\n  /**\n   *\n   * @param message - The message to log\n   * @description Logs a message with the [ERROR] prefix\n   *\n   * @example\n   * ```js\n   * manager.logger.error(\"An error occurred!\");\n   * ```\n   */\n  error(message: string) {\n    const logType: ILogType = {\n      prefix: \"[ERROR]\",\n      emoji: \"❌\",\n      color: ConsoleColor.FgRed,\n    };\n\n    this.log(LogLevel.Error, logType, message);\n  }\n\n  /**\n   *\n   * @param message - The message to log\n   * @description Logs a message with the [INFO] prefix\n   *\n   * @example\n   * ```js\n   * manager.logger.info(\"Hello, World!\");\n   * ```\n   */\n  info(message: string) {\n    const logType: ILogType = {\n      prefix: \"[INFO]\",\n      emoji: \"💬\",\n      color: ConsoleColor.FgCyan,\n    };\n\n    this.log(LogLevel.Info, logType, message);\n  }\n\n  /**\n   *\n   * @param message - The message to log\n   * @description Logs a message with the [WARNING] prefix\n   *\n   * @example\n   * ```js\n   * manager.logger.warn(\"This is a warning!\");\n   * ```\n   */\n  warn(message: string) {\n    const logType: ILogType = {\n      prefix: \"[WARNING]\",\n      emoji: \"⚠️ \",\n      color: ConsoleColor.FgYellow,\n    };\n\n    this.log(LogLevel.Warn, logType, message);\n  }\n}\n"]}